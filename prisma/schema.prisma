// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id           String @id @unique
  email        String
  firstName    String
  lastName     String
  profileImage String

  ownedAnimals Animal[]
}

model Animal {
  id           String        @id @default(uuid())
  createdAt    DateTime      @default(now())
  name         String?
  weight       Int? // en grammes
  race         ChickenBreed  @default(unknown)
  healthStatus HealthStatus? // optionnel / nullable
  healthNotes  String?
  birthDate    DateTime      @default(now())
  User         User?         @relation(fields: [userId], references: [id])
  userId       String
  note         String?
  imgUrl       String?
  sex          Sex?          @default(female)
}

// model WeightHistory {
//   id       String   @id @default(uuid())
//   date     DateTime @default(now())
//   weight   Int // en grammes
//   animalId String
//   animal   Animal   @relation(fields: [animalId], references: [id])

//   @@index([animalId, date], name: "idx_animal_date")
// }

enum Sex {
  male
  female
}

enum HealthStatus {
  healthy
  injured
  sick
  recovering
  unknown // status inconnu
}

// ðŸŸ¨ðŸŸ¨ðŸŸ¨ Keep lib/animals/chickenBreed in sync!
enum ChickenBreed {
  pouleRousse
  leghorn
  isaBrown
  harco
  sussex
  rhodeIslandRed
  cornish
  faverolles
  plymouthRock
  brahma
  cochin
  orpington
  wyandotte
  marans
  sussexTricolor
  australorp
  padoue
  houdan
  sabelpoot
  serama
  nagasaki
  gournay
  coucouDeRennes
  gelineDeTouraine
  gauloise
  ardennaise
  pekin
  sebright
  chabo
  barbuDUccle
  bantamDeHollande
  autre // race connue mais non prÃ©sente
  unknown // Inconnue par l'user
}
